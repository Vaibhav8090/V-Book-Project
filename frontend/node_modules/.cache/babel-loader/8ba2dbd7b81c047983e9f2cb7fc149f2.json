{"ast":null,"code":"import { ADD_ITEM_CART, CART_NAME_PAYMENT, CART_SAVE_COUNTRY_CUSTOMER, CART_SAVE_PAYMENT, REMOVE_ALL_FROM_CART, REMOVE_ITEM_CART } from \"../constants/cartconstants\";\nconst cartItemsFromStorage = localStorage.getItem('cartItems') ? JSON.parse(localStorage.getItem('cartItems')) : [];\nconst countryCustomerFromStorage = localStorage.getItem('countryCustomer') ? JSON.parse(localStorage.getItem('countryCustomer')) : {};\nconst paymentShippingFromStorage = localStorage.getItem('MethodOfPayment') ? JSON.parse(localStorage.getItem('MethodOfPayment')) : {};\nconst nameOnCardFromStorage = localStorage.getItem('NameOnCard') ? JSON.parse(localStorage.getItem('NameOnCard')) : {};\nconst initalState = {\n  cartItems: cartItemsFromStorage,\n  countryCustomer: countryCustomerFromStorage,\n  MethodOfPayment: paymentShippingFromStorage,\n  NameOnCard: nameOnCardFromStorage\n};\nexport const cartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initalState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_ITEM_CART:\n      const item = action.payload; //the new course added\n      // x.course it's the ID\n      const existingItem = state.cartItems.find(x => x.course === item.course);\n      if (existingItem) {\n        return {\n          ...state,\n          cartItems: state.cartItems.map(x => x.course === existingItem.course ? item : x)\n        };\n      } else {\n        return {\n          ...state,\n          cartItems: [...state.cartItems, item]\n        };\n      }\n    case REMOVE_ITEM_CART:\n      return {\n        ...state,\n        cartItems: state.cartItems.filter(x => x.course !== action.payload)\n      };\n    case REMOVE_ALL_FROM_CART:\n      return {\n        ...state\n      };\n    case CART_SAVE_COUNTRY_CUSTOMER:\n      return {\n        ...state,\n        countryCustomer: action.payload\n      };\n    case CART_SAVE_PAYMENT:\n      return {\n        ...state,\n        MethodOfPayment: action.payload\n      };\n    case CART_NAME_PAYMENT:\n      return {\n        ...state,\n        NameOnCard: action.payload\n      };\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["ADD_ITEM_CART","CART_NAME_PAYMENT","CART_SAVE_COUNTRY_CUSTOMER","CART_SAVE_PAYMENT","REMOVE_ALL_FROM_CART","REMOVE_ITEM_CART","cartItemsFromStorage","localStorage","getItem","JSON","parse","countryCustomerFromStorage","paymentShippingFromStorage","nameOnCardFromStorage","initalState","cartItems","countryCustomer","MethodOfPayment","NameOnCard","cartReducer","state","action","type","item","payload","existingItem","find","x","course","map","filter"],"sources":["C:/React-Project/V-Book/frontend/src/redux/reducers/cartReducer.js"],"sourcesContent":["import { ADD_ITEM_CART,  CART_NAME_PAYMENT,  CART_SAVE_COUNTRY_CUSTOMER,  CART_SAVE_PAYMENT,  REMOVE_ALL_FROM_CART,  REMOVE_ITEM_CART} from \"../constants/cartconstants\"\n\nconst cartItemsFromStorage = localStorage.getItem('cartItems') ? JSON.parse(localStorage.getItem('cartItems')) : []\n\nconst countryCustomerFromStorage = localStorage.getItem('countryCustomer') ? JSON.parse(localStorage.getItem('countryCustomer')) : {}\n\nconst paymentShippingFromStorage = localStorage.getItem('MethodOfPayment') ? JSON.parse(localStorage.getItem('MethodOfPayment')) : {}\n\nconst nameOnCardFromStorage = localStorage.getItem('NameOnCard') ? JSON.parse(localStorage.getItem('NameOnCard')) : {}\n\nconst initalState = {\n    cartItems: cartItemsFromStorage,\n    countryCustomer: countryCustomerFromStorage,\n    MethodOfPayment: paymentShippingFromStorage,\n    NameOnCard: nameOnCardFromStorage \n}\nexport const cartReducer = (state = initalState, action) => {\n    switch(action.type) {\n        case ADD_ITEM_CART : \n        const item = action.payload//the new course added\n        // x.course it's the ID\n        const existingItem = state.cartItems.find((x) => x.course === item.course)\n        if (existingItem){\n            return {\n                ...state,\n                cartItems : state.cartItems.map((x) =>\n                 x.course === existingItem.course ? item : x)\n             } \n            }\n            else {\n                return{\n                    ...state,\n                    cartItems: [...state.cartItems,item]\n                }}\n         case REMOVE_ITEM_CART : \n         return {\n            ...state,\n            cartItems : state.cartItems.filter((x) =>\n             x.course !== action.payload)\n         }\n         \n         case REMOVE_ALL_FROM_CART: \n         \n         return {\n            ...state\n            \n         }\n         \n         case CART_SAVE_COUNTRY_CUSTOMER:\n            return {\n                ...state,\n                countryCustomer: action.payload,\n            }\n\n\n            case CART_SAVE_PAYMENT:\n                return {\n                    ...state,\n                    MethodOfPayment: action.payload\n                }\n\n                case CART_NAME_PAYMENT:\n                return {\n                    ...state,\n                    NameOnCard: action.payload\n                }\n        default : return state\n    }\n}"],"mappings":"AAAA,SAASA,aAAa,EAAGC,iBAAiB,EAAGC,0BAA0B,EAAGC,iBAAiB,EAAGC,oBAAoB,EAAGC,gBAAgB,QAAO,4BAA4B;AAExK,MAAMC,oBAAoB,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,GAAG,EAAE;AAEnH,MAAMG,0BAA0B,GAAGJ,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAAC,CAAC;AAErI,MAAMI,0BAA0B,GAAGL,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAAC,CAAC;AAErI,MAAMK,qBAAqB,GAAGN,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC;AAEtH,MAAMM,WAAW,GAAG;EAChBC,SAAS,EAAET,oBAAoB;EAC/BU,eAAe,EAAEL,0BAA0B;EAC3CM,eAAe,EAAEL,0BAA0B;EAC3CM,UAAU,EAAEL;AAChB,CAAC;AACD,OAAO,MAAMM,WAAW,GAAG,YAAiC;EAAA,IAAhCC,KAAK,uEAAGN,WAAW;EAAA,IAAEO,MAAM;EACnD,QAAOA,MAAM,CAACC,IAAI;IACd,KAAKtB,aAAa;MAClB,MAAMuB,IAAI,GAAGF,MAAM,CAACG,OAAO;MAC3B;MACA,MAAMC,YAAY,GAAGL,KAAK,CAACL,SAAS,CAACW,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,MAAM,KAAKL,IAAI,CAACK,MAAM,CAAC;MAC1E,IAAIH,YAAY,EAAC;QACb,OAAO;UACH,GAAGL,KAAK;UACRL,SAAS,EAAGK,KAAK,CAACL,SAAS,CAACc,GAAG,CAAEF,CAAC,IACjCA,CAAC,CAACC,MAAM,KAAKH,YAAY,CAACG,MAAM,GAAGL,IAAI,GAAGI,CAAC;QAC/C,CAAC;MACF,CAAC,MACI;QACD,OAAM;UACF,GAAGP,KAAK;UACRL,SAAS,EAAE,CAAC,GAAGK,KAAK,CAACL,SAAS,EAACQ,IAAI;QACvC,CAAC;MAAA;IACR,KAAKlB,gBAAgB;MACrB,OAAO;QACJ,GAAGe,KAAK;QACRL,SAAS,EAAGK,KAAK,CAACL,SAAS,CAACe,MAAM,CAAEH,CAAC,IACpCA,CAAC,CAACC,MAAM,KAAKP,MAAM,CAACG,OAAO;MAC/B,CAAC;IAED,KAAKpB,oBAAoB;MAEzB,OAAO;QACJ,GAAGgB;MAEN,CAAC;IAED,KAAKlB,0BAA0B;MAC5B,OAAO;QACH,GAAGkB,KAAK;QACRJ,eAAe,EAAEK,MAAM,CAACG;MAC5B,CAAC;IAGD,KAAKrB,iBAAiB;MAClB,OAAO;QACH,GAAGiB,KAAK;QACRH,eAAe,EAAEI,MAAM,CAACG;MAC5B,CAAC;IAED,KAAKvB,iBAAiB;MACtB,OAAO;QACH,GAAGmB,KAAK;QACRF,UAAU,EAAEG,MAAM,CAACG;MACvB,CAAC;IACT;MAAU,OAAOJ,KAAK;EAAA;AAE9B,CAAC"},"metadata":{},"sourceType":"module"}